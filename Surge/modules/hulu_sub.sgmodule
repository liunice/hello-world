#!name=Hulu外挂字幕
#!desc=请将.srt格式字幕文件按命名规范放在NAS指定目录下

[MITM]
hostname = %APPEND% discover.hulu.com, manifest-dp.hulustream.com

#[Rule]
#URL-REGEX,^https:\/\/ap(p|i)\.bilibili\.com\/,REJECT
#DOMAIN,adimg.vue.weibo.com,REJECT
#AND,((URL-REGEX,\/amdc\/mobileDispatch),(USER-AGENT,%E6%89%8B%E6%9C%BA%E6%B7%98%E5%AE%9D*)),REJECT

[URL Rewrite]
#(?<=_region=)CN(?=&) JP 307

[Script]
#http-response ^http://www.example.com/test script-path=test.js,requires-body=true,max-size=-1,script-update-interval=0
#episode-page = type=http-response,pattern=^https:\/\/comet\.api\.hbo\.com\/express\-content,requires-body=1,script-path=hbomax_sub.js
http-response ^https:\/\/discover\.hulu\.com\/content\/v\d+\/hubs\/series\/[\w\-]+\? script-path=https://raw.githubusercontent.com/liunice/hello-world/master/hulu_sub.js,requires-body=true
http-response ^https:\/\/discover\.hulu\.com\/content\/v\d+\/hubs\/series\/[\w\-]+\/season\/\d+\? script-path=https://raw.githubusercontent.com/liunice/hello-world/master/hulu_sub.js,requires-body=true
http-response ^https:\/\/manifest\-dp\.hulustream\.com\/hls\/\d+\.m3u8\?.*?&auth=\w+$ script-path=https://raw.githubusercontent.com/liunice/hello-world/master/hulu_sub.js,requires-body=true
http-response ^https:\/\/manifest\-dp\.hulustream\.com\/v\d+\/hls\/\d+\/.*?\.m3u8\?.*?&auth=\w+$ script-path=https://raw.githubusercontent.com/liunice/hello-world/master/hulu_sub.js,requires-body=true
http-response ^https:\/\/manifest\-dp\.hulustream\.com\/webvtt\?asset_id=\d+ script-path=https://raw.githubusercontent.com/liunice/hello-world/master/hulu_sub.js,requires-body=true
http-response ^https:\/\/manifest\-dp\.hulustream\.com\/subtitles\/(.*?)\/S\d{2}\/S(\d{2})E(\d{2})\.vtt$ script-path=https://raw.githubusercontent.com/liunice/hello-world/master/hulu_sub.js,requires-body=true
http-response ^https:\/\/discover\.hulu\.com\/content\/v\d+\/hubs\/movie\/[\w\-]+\? script-path=https://raw.githubusercontent.com/liunice/hello-world/master/hulu_sub.js,requires-body=true